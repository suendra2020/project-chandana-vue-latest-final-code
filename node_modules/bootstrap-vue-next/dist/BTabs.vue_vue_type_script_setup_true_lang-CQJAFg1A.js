"use strict";const e=require("vue"),l=require("./classes-BPvGsmbC.js"),a=require("./useAlignment-BTUJZ_9x.js"),t=require("./useId-CVpYZavN.js"),i=require("./index-DiURjA3G.js"),n=require("./keys-W3DrYQSP.js"),u=require("./useDefaults-q0yyNSBk.js"),d=require("./dom-CoD-aJvn.js"),o=require("./flattenFragments-BAK-0GN6.js"),v=e.defineComponent({inheritAttrs:!1,__name:"BTab",props:e.mergeModels({buttonId:{default:void 0},disabled:{type:Boolean,default:!1},id:{default:void 0},lazy:{type:Boolean,default:void 0},unmountLazy:{type:Boolean,default:void 0},noBody:{type:Boolean,default:!1},tag:{default:"div"},title:{default:void 0},titleItemClass:{default:void 0},titleLinkAttrs:{default:void 0},titleLinkClass:{default:void 0}},{active:{type:Boolean,default:!1},activeModifiers:{}}),emits:["update:active"],setup(l,{expose:a}){const i=l,d=u.useDefaults(i,"BTab"),o=e.useSlots(),v=e.useModel(l,"active"),s=e.inject(n.tabsInjectionKey,null),r=e.ref(d.id),c=t.useId("","tabpane"),f=e.computed((()=>d.id??r.value??c.value)),p=t.useId((()=>d.buttonId),"tab"),m=e.ref(!1),b=e.useTemplateRef("_el"),C=e.useAttrs(),y=e.computed((()=>{const{onClick:e,...l}=C;return l}));s&&(!function(){if(!s)return;const l=s.registerTab(e.computed((()=>({internalId:c.value,id:f.value,active:v.value,buttonId:p.value,disabled:d.disabled,title:d.title,titleComponent:o.title,titleItemClass:d.titleItemClass,titleLinkAttrs:d.titleLinkAttrs,titleLinkClass:d.titleLinkClass,onClick:C.onClick,el:b}))));l!==r.value&&(r.value=l)}(),v.value&&s.activateTab(c.value)),e.onUnmounted((()=>{s&&s.unregisterTab(c.value)}));const I=e.computed((()=>(null==s?void 0:s.activeId.value)===f.value)),k=e.ref(I.value),h=e.computed((()=>!(!(null==s?void 0:s.lazy.value)&&!d.lazy))),B=e.computed((()=>I.value&&!d.disabled)),g=e.computed((()=>B.value||!h.value||h.value&&!d.unmountLazy&&m.value));e.watch(g,(e=>{e&&!m.value&&(m.value=!0)})),e.watch(I,(e=>{if(e)return v.value=!0,void setTimeout((()=>{k.value=!0}),0);k.value=!1,v.value=!1})),e.watch(v,(e=>{d.disabled?v.value=!1:s&&(e?I.value||s.activateTab(c.value):I.value&&s.activateTab(void 0))}));const x=e.computed((()=>[{active:I.value,show:k.value,"card-body":(null==s?void 0:s.card.value)&&!1===d.noBody,fade:!(null==s?void 0:s.noFade.value)},k.value?null==s?void 0:s.activeTabClass.value:null==s?void 0:s.inactiveTabClass.value,null==s?void 0:s.tabClass.value]));return a({activate:()=>{v.value=!0},deactivate:()=>{v.value=!1}}),(l,a)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(d).tag),e.mergeProps({id:f.value,ref:"_el",class:["tab-pane",x.value],role:"tabpanel","aria-labelledby":e.unref(p)},y.value),{default:e.withCtx((()=>[g.value?e.renderSlot(l.$slots,"default",{key:0}):e.createCommentVNode("",!0)])),_:3},16,["id","class","aria-labelledby"]))}}),s=["aria-orientation"],r=["id","aria-controls","aria-selected","disabled","tabindex","onClick"],c=e.defineComponent({__name:"BTabs",props:e.mergeModels({activeNavItemClass:{default:void 0},activeTabClass:{default:void 0},align:{default:void 0},card:{type:Boolean,default:!1},contentClass:{default:void 0},end:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},id:{default:void 0},index:{},inactiveNavItemClass:{default:void 0},inactiveTabClass:{default:void 0},justified:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},navClass:{default:void 0},navItemClass:{default:void 0},navWrapperClass:{default:void 0},noFade:{type:Boolean,default:!1},noKeyNav:{type:Boolean,default:!1},noNavStyle:{type:Boolean,default:!1},pills:{type:Boolean,default:!1},small:{type:Boolean,default:!1},tag:{default:"div"},tabClass:{default:void 0},underline:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1}},{index:{default:-1},indexModifiers:{},modelValue:{default:void 0},modelModifiers:{}}),emits:e.mergeModels(["activate-tab"],["update:index","update:modelValue"]),setup(c,{emit:f}){var p,m,b,C;const y=c,I=u.useDefaults(y,"BTabs"),k=f,h=e.useSlots(),B=e.useModel(c,"index"),g=e.useModel(c,"modelValue"),x=i.createReusableTemplate(),w=e.ref([]),T=e.ref([]),N=e.ref(!1),M=e.ref([]),K=()=>{var l;const a=o.flattenFragments((null==(l=h.default)?void 0:l.call(h,{}))??[]);T.value=(Array.isArray(a)?a:[a]).filter((e=>e.type===v)),0===M.value.length&&(M.value=T.value.map((l=>e.unref(t.useId((()=>{var e;return null==(e=l.props)?void 0:e.id}),"tabpane"))))),N.value=T.value.some((e=>{var l,a;return void 0!==(null==(l=e.props)?void 0:l.active)&&!1!==(null==(a=e.props)?void 0:a.active)}))};K(),e.watch((()=>{var e;return null==(e=h.default)?void 0:e.call(h,{})}),(()=>{K(),e.nextTick((()=>{P()}))}));const z=e.computed((()=>{if(0===w.value.length){const e=T.value.findIndex((e=>{var l,a;return void 0!==(null==(l=e.props)?void 0:l.active)&&(!1===e.props.disabled||void 0===e.props.disabled)||g.value&&(null==(a=e.props)?void 0:a.id)===g.value}));return T.value.map(((l,a)=>{var t,i,n,u,d,o,v,s,r,c,f;const p=-1!==e?a===e:B.value>-1?a===B.value:0===a;return{id:(null==(t=l.props)?void 0:t.id)??M.value[a],internalId:`premount-${a}`,buttonId:null==(i=l.props)?void 0:i.buttonId,disabled:null==(n=l.props)?void 0:n.disabled,title:null==(u=l.props)?void 0:u.title,titleComponent:null==(d=l.children)?void 0:d.title,titleItemClass:null==(o=l.props)?void 0:o.titleItemClass,titleLinkAttrs:null==(v=l.props)?void 0:v.titleLinkAttrs,titleLinkClass:null==(s=l.props)?void 0:s.titleLinkClass,onClick:null==(r=l.props)?void 0:r.onClick,active:p,navItemClasses:[{active:p,disabled:!(!1===(null==(c=l.props)?void 0:c.disabled)||void 0===(null==(f=l.props)?void 0:f.disabled))},p?I.activeNavItemClass:I.inactiveNavItemClass,I.navItemClass]}}))}return w.value.map((l=>{const a=e.unref(l),t=a.id===g.value;return{...a,active:t,navItemClasses:[{active:t,disabled:a.disabled},t?I.activeNavItemClass:I.inactiveNavItemClass,I.navItemClass]}}))}));let L=!1,j=!1,V=!1;function _(){var l;if(j){const l=z.value.findIndex((e=>e.id===g.value));-1!==l&&e.nextTick((()=>{B.value=l,j=!1}))}V&&B.value>-1&&(null==(l=z.value[B.value])?void 0:l.id)&&e.nextTick((()=>{var e;g.value=null==(e=z.value[B.value])?void 0:e.id,V=!1}))}-1===B.value&&g.value?-1!==z.value.findIndex((e=>e.id===g.value))?B.value=z.value.findIndex((e=>e.id===g.value)):j=!0:B.value>-1&&!g.value?(null==(p=z.value[B.value])?void 0:p.id)?g.value=null==(m=z.value[B.value])?void 0:m.id:V=!0:-1!==B.value||g.value||N.value?-1===B.value&&!g.value&&N.value&&(B.value=z.value.findIndex((e=>void 0!==e.active&&!1!==e.active&&(void 0===e.disabled||!1===e.disabled))),g.value=null==(C=z.value[B.value])?void 0:C.id):(B.value=z.value.findIndex((e=>void 0===e.disabled||!1===e.disabled)),g.value=null==(b=z.value[B.value])?void 0:b.id),_();const E=e.computed((()=>!((null==z?void 0:z.value)&&z.value.length>0))),A=e.computed((()=>({"d-flex":I.vertical,"align-items-start":I.vertical}))),S=a.useAlignment((()=>I.align)),q=e.computed((()=>({"nav-pills":I.pills,"nav-underline":I.underline,"flex-column me-3":I.vertical,[S.value]:void 0!==I.align,"nav-fill":I.fill,"card-header-tabs":I.card&&!I.pills&&!I.underline,"card-header-pills":I.card&&I.pills,"nav-justified":I.justified,"nav-tabs":!I.noNavStyle&&!I.pills&&!I.underline,small:I.small}))),D=(l,a)=>{z.value.length<=0||I.noKeyNav||(l.preventDefault(),l.stopPropagation(),B.value=F(B.value+a,a),e.nextTick((()=>{var e,l;B.value>=0&&(null==(l=document.getElementById(null==(e=z.value[B.value])?void 0:e.buttonId))||l.focus())})))},F=(e,l)=>{let a=e,t=-1,i=-1;for(let n=0;n<z.value.length;n++)z.value[n].disabled||(-1===t&&(t=n),i=n);for(;a>=t&&a<=i&&z.value[a].disabled;)a+=l;return a<t&&(a=t),a>i&&(a=i),a};let R,$=!1;e.watch(B,((a,t)=>{var i,n,u,d,o,v;if(z.value.length<=0||z.value.filter((e=>!e.disabled)).length<=0)return;if($)return void($=!1);const s=F(a,a>t?1:-1);if(s!==a)return R=t,void(B.value=s);const r=new l.BvEvent("activate-tab",{cancelable:!0});if(k("activate-tab",null==(i=z.value[s])?void 0:i.id,null==(n=z.value[R??t])?void 0:n.id,s,R??t,r),r.defaultPrevented){$=!0;const l=R??t??F(0,1);return R=void 0,g.value!==(null==(u=z.value[l])?void 0:u.id)&&(g.value=null==(d=z.value[l])?void 0:d.id),void e.nextTick((()=>{var e,a;l>=0&&(null==(a=document.getElementById(null==(e=z.value[l])?void 0:e.buttonId))||a.focus())}))}g.value!==(null==(o=z.value[s])?void 0:o.id)&&(g.value=null==(v=z.value[s])?void 0:v.id),R=void 0})),e.watch(g,((l,a)=>{var t;if(z.value.length<=0||z.value.filter((e=>!e.disabled)).length<=0)return;const i=z.value.findIndex((e=>e.id===l));if(i===B.value)return;const n=z.value.findIndex((e=>e.id===a));if(!(null==(t=z.value[i])?void 0:t.disabled))return-1===i?(B.value=F(0,1),void e.nextTick((()=>{var e;g.value=null==(e=z.value[B.value])?void 0:e.id}))):void(B.value=i);B.value=F(i,i>n?1:-1)}));e.onMounted((()=>{_(),P(),L=!0}));const P=()=>{w.value.sort(((e,l)=>d.sortSlotElementsByPosition(e.value.el.value,l.value.el.value))),g.value&&B.value!==z.value.findIndex((e=>e.id===g.value))&&(B.value=z.value.findIndex((e=>e.id===g.value)))};return e.provide(n.tabsInjectionKey,{lazy:e.toRef((()=>I.lazy)),card:e.toRef((()=>I.card)),noFade:e.toRef((()=>I.noFade)),activeTabClass:e.toRef((()=>I.activeTabClass)),inactiveTabClass:e.toRef((()=>I.inactiveTabClass)),tabClass:e.toRef((()=>I.tabClass)),registerTab:l=>{const a=w.value.findIndex((e=>e.value.internalId===l.value.internalId));-1===a?(w.value.push(l),L&&e.nextTick((()=>{P()}))):(w.value[a]=l,L&&P());const t=w.value.findIndex((e=>e.value.internalId===l.value.internalId));return l.value.id??(L?l.value.internalId:M.value[t])},unregisterTab:e=>{w.value=w.value.filter((l=>l.value.internalId!==e))},activeId:g,activateTab:e=>{const l=z.value.findIndex((l=>l.internalId===e));B.value=void 0!==e&&-1!==l?l:F(0,1)}}),(l,a)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(I).tag),{id:e.unref(I).id,class:e.normalizeClass(["tabs",A.value])},{default:e.withCtx((()=>[e.createVNode(e.unref(x).define,null,{default:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass(["tab-content",e.unref(I).contentClass])},[e.renderSlot(l.$slots,"default"),E.value?(e.openBlock(),e.createElementBlock("div",{key:"bv-empty-tab",class:e.normalizeClass(["tab-pane active",{"card-body":e.unref(I).card}])},[e.renderSlot(l.$slots,"empty")],2)):e.createCommentVNode("",!0)],2)])),_:3}),e.unref(I).end?(e.openBlock(),e.createBlock(e.unref(x).reuse,{key:0})):e.createCommentVNode("",!0),e.createElementVNode("div",{class:e.normalizeClass([e.unref(I).navWrapperClass,{"card-header":e.unref(I).card,"ms-auto":l.vertical&&e.unref(I).end}])},[e.createElementVNode("ul",{class:e.normalizeClass(["nav",[q.value,e.unref(I).navClass]]),role:"tablist","aria-orientation":e.unref(I).vertical?"vertical":"horizontal"},[e.renderSlot(l.$slots,"tabs-start"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(z.value,((l,t)=>(e.openBlock(),e.createElementBlock("li",{key:l.id??l.internalId,class:e.normalizeClass(["nav-item",l.titleItemClass]),role:"presentation"},[e.createElementVNode("button",e.mergeProps({id:l.buttonId,class:["nav-link",[l.navItemClasses,l.titleLinkClass]],role:"tab","aria-controls":l.id,"aria-selected":l.active,disabled:l.disabled,tabindex:e.unref(I).noKeyNav||l.active?void 0:-1,ref_for:!0},l.titleLinkAttrs,{onKeydown:[a[0]||(a[0]=e.withKeys(e.withModifiers((l=>!e.unref(I).vertical&&D(l,-1)),["exact"]),["left"])),a[1]||(a[1]=e.withKeys(e.withModifiers((l=>!e.unref(I).vertical&&D(l,-999)),["shift"]),["left"])),a[2]||(a[2]=e.withKeys(e.withModifiers((l=>e.unref(I).vertical&&D(l,-1)),["exact"]),["up"])),a[3]||(a[3]=e.withKeys(e.withModifiers((l=>e.unref(I).vertical&&D(l,-999)),["shift"]),["up"])),a[4]||(a[4]=e.withKeys(e.withModifiers((l=>!e.unref(I).vertical&&D(l,1)),["exact"]),["right"])),a[5]||(a[5]=e.withKeys(e.withModifiers((l=>!e.unref(I).vertical&&D(l,999)),["shift"]),["right"])),a[6]||(a[6]=e.withKeys(e.withModifiers((l=>e.unref(I).vertical&&D(l,1)),["exact"]),["down"])),a[7]||(a[7]=e.withKeys(e.withModifiers((l=>e.unref(I).vertical&&D(l,999)),["shift"]),["down"])),a[8]||(a[8]=e.withKeys((e=>D(e,-999)),["page-up"])),a[9]||(a[9]=e.withKeys((e=>D(e,999)),["page-down"])),a[10]||(a[10]=e.withKeys((e=>D(e,-999)),["home"])),a[11]||(a[11]=e.withKeys((e=>D(e,999)),["end"]))],onClick:e.withModifiers((e=>{return l=e,void((a=t)>=0&&!z.value[a].disabled&&(null==(i=z.value[a])?void 0:i.onClick)&&"function"==typeof z.value[a].onClick&&(null==(u=(n=z.value[a]).onClick)||u.call(n,l),l.defaultPrevented)?null==(d=document.getElementById(z.value[a].buttonId))||d.blur():B.value=a);var l,a,i,n,u,d}),["stop"])}),[l.titleComponent?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.titleComponent),{key:0})):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(l.title),1)],64))],16,r)],2)))),128)),e.renderSlot(l.$slots,"tabs-end")],10,s)],2),e.unref(I).end?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(e.unref(x).reuse,{key:1}))])),_:3},8,["id","class"]))}});exports._sfc_main=v,exports._sfc_main$1=c;
//# sourceMappingURL=BTabs.vue_vue_type_script_setup_true_lang-CQJAFg1A.js.map
